# DOCUMENT_TYPE: TEST_CASE
# TC_ID: TC-E2E-001
# VERSION: 3.0

## 1. Summary

- Type: e2e
- Title: Full login and logout flow via Keycloak
- Status: proposed
- Related Requirements:
  - REQ-001
- Related Modules:
  - MOD-FE-Login
  - MOD-BE-Auth

## 2. Pre-Conditions

- Application and Keycloak deployed to test environment.
- Test user exists in Keycloak.

## 3. Test Steps

### Login Flow
1. Open `/` (landing page).
2. Verify "Sign in" link is visible in navigation.
3. Click "Sign in" link.
4. Verify redirection to `/login` page.
5. Click "Sign In with Keycloak" button.
6. Verify redirection to Keycloak domain.
7. Enter valid email and password on Keycloak page.
8. Click "Sign In" on Keycloak.
9. Wait for redirection back to app.

### Logout Flow
10. Verify "Logout" button is visible in navigation (replaces "Sign in").
11. Click "Logout" button.
12. Wait for redirection to landing page (`/`).
13. Verify "Sign in" link is visible again in navigation.
14. Verify "Logout" button is no longer visible.

## 4. Expected Result

### After Login:
- User lands on `/dashboard` or `/`.
- Navigation shows "Logout" button instead of "Sign in" link.
- Valid session cookies/tokens are present.

### After Logout:
- User is on landing page (`/`).
- Navigation shows "Sign in" link.
- Session is terminated in both app and Keycloak.

## 5. Automation

- File: `web/tests/login.spec.ts`
- Framework: Playwright
- Tests implemented:
  - ‚úÖ Login page has Sign In button
  - ‚úÖ Clicking Sign In redirects to Keycloak
  - ‚úÖ Navigation shows Sign in when not authenticated
  - üìù Navigation shows Logout when authenticated (requires Keycloak)
  - üìù Clicking Logout logs user out (requires Keycloak)
