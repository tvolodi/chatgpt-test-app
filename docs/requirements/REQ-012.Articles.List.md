# DOCUMENT_TYPE: REQUIREMENT
# REQ_ID: REQ-012
# VERSION: 1.0

## 1. Summary

- Title: Public Article List & Main Page Widget
- Type: functional
- Priority: high
- Status: **DRAFT**

## 2. Description

This requirement covers the public-facing display of articles, specifically:
1.  **Main Page Widget**: A section on the home page displaying the 3 most recently published articles.
2.  **Articles List Page**: A dedicated page (`/articles`) listing all published articles with pagination.
3.  **Article Card**: A reusable UI component to display article summaries.
4.  **Navigation**: "Show All" button on the main page leading to the list page. Double-clicking a card opens the full article view.

## 3. User Stories

- **US-12.1**: As a visitor, I want to see the latest articles on the home page so I can quickly access fresh content.
- **US-12.2**: As a visitor, I want to browse all published articles on a dedicated page so I can find older content.
- **US-12.3**: As a visitor, I want to see a summary of each article (title, date, author, tags, preview) before clicking so I can decide if it's relevant.
- **US-12.4**: As a visitor, I want to navigate through pages of articles so I'm not overwhelmed by a single long list.

## 4. Technical Specifications

### 4.1. Frontend (Next.js)
- **Page**: `web/src/app/[locale]/articles/page.tsx` (List Page)
- **Component**: `web/src/app/components/articles/ArticleCard.tsx` (Reusable Card)
- **Component**: `web/src/app/components/home/LatestArticles.tsx` (Main Page Widget)
- **Styling**: Consistent with site theme (Tailwind CSS).
- **Interactions**: Double-click on card to navigate to `web/src/app/[locale]/articles/[id]/page.tsx`.

### 4.2. Backend (Go)
- **API Endpoint**: `GET /api/articles/public` (New or modified endpoint)
  - Query Params: `limit` (for widget), `page`, `pageSize` (for list), `sort` (default `published_at desc`).
  - Response: List of articles with `total_count` for pagination.
  - **Logic**: Must only return articles with `status = 'PUBLISHED'`.
  - **Preview Text**: Backend should generate a plain-text preview (first 10 lines or ~200 chars) from the Markdown body, stripping formatting.

### 4.3. Database
- Ensure `articles` table has an index on `published_at` for efficient sorting.

## 5. Acceptance Criteria

## 6. Verification & Testing Guide

### 6.1. Automated Tests
- **E2E Test**: `web/tests/req-012-public-articles.spec.ts`
  - Verify Main Page widget loads 3 items.
  - Verify "Show All" navigation.
  - Verify List Page pagination.
  - Verify Article Card content and double-click navigation.
- **Backend Test**: `api/tests/articles/public_list_test.go`
  - Verify filtering by `status='PUBLISHED'`.
  - Verify sorting by `published_at`.
  - Verify pagination logic.

## 7. Traceability
- **Related Modules**: MOD-FE-Articles, MOD-BE-Articles
- **Dependencies**: REQ-010 (Article Creation)
