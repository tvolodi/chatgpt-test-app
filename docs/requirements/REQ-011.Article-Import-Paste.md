# DOCUMENT_TYPE: REQUIREMENT
# REQ_ID: REQ-011
# VERSION: 2.1

## 1. Summary

- Title: Rich Text Editing & Word Paste (Tiptap)
- Type: functional
- Priority: high
- Status: implemented

## 2. Description

Replace the raw Markdown textarea with a rich text editor (Tiptap) to provide a WYSIWYG experience. The editor must seamlessly handle pasting content from Microsoft Word and Google Docs, preserving formatting while sanitizing unwanted artifacts. It should support Markdown import/export for backend compatibility.

## 3. Functional Requirements

### 3.1. Rich Text Editor
- **Component**: Use **Tiptap** (headless editor).
- **Features**:
  - Headings (H1-H3)
  - Bold, Italic, Strike
  - Lists (Bullet, Ordered)
  - Blockquotes
  - Code Blocks
  - Images (Upload & Display)
- **Styling**: Must match the application's Tailwind CSS design system.

### 3.2. Paste Handling
- **Source Compatibility**: Support pasting from:
  - Microsoft Word
  - Google Docs
  - Plain Text
- **Behavior**:
  - Automatically strip "garbage" HTML (comments, XML, Office tags).
  - Preserve semantic structure (headings, lists, tables).
  - **Images**: Automatically extract base64 images from paste, upload to backend, and replace with URL.

### 3.3. Data Persistence
- **Input**: Load existing Markdown content into the editor.
- **Output**: Save content as Markdown (convert HTML → Markdown on save).

## 4. Technical Specifications

### 4.1. Frontend (Next.js)
- **Libraries**:
  - `@tiptap/react`
  - `@tiptap/starter-kit`
  - `@tiptap/extension-image`
  - `turndown` (HTML → Markdown export)
  - `marked` (Markdown → HTML import)
- **Component**: `web/src/app/components/articles/TiptapEditor.tsx`

### 4.2. Backend (Go)
- No changes required (API accepts Markdown string).

## 5. Acceptance Criteria
- AC-1: User sees a rich text interface instead of raw Markdown.
- AC-2: Pasting from Word retains formatting (bold, headers) without garbage.
- AC-3: Images pasted from Word are uploaded and displayed.
- AC-4: Saving the article persists valid Markdown to the database.
- AC-5: Loading an existing article correctly renders Markdown in Tiptap.

## 6. Traceability
- **Related Modules**: MOD-FE-Articles
- **Dependencies**: REQ-010 (Articles)
- **Implementation**: `web/src/app/components/articles/TiptapEditor.tsx`, `web/src/app/globals.css`
- **Tests**: `web/tests/req-011-article-paste.spec.ts`
